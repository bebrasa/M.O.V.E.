<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time EMG Visualization</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Real-Time EMG Visualization</h1>
    <div id="emg-plot"></div>

    <script>
        const socket = io();

        // Инициализация графика
        const layout = {
            title: 'Real-Time EMG Data',
            xaxis: { title: 'Time (s)' },
            yaxis: { title: 'Signal Amplitude', range: [0, 255] }
        };

        Plotly.newPlot('emg-plot', [{
            x: [],
            y: [],
            mode: 'lines',
            name: 'EMG Signal',
            line: { color: 'blue', width: 2 }
        }], layout);

        // Запуск стриминга
        socket.emit('start_stream');
        console.log("Стриминг запущен");

        // Обновление графика
        socket.on('update_plot', (data) => {
            console.log("Данные получены:", data);

            if (data.x && data.y) {
                Plotly.update('emg-plot', {
                    x: [data.x],
                    y: [data.y]
                });
                console.log("График обновлен.");
            } else {
                console.error("Пустые данные.");
            }
        });
    </script>
</body>
</html>